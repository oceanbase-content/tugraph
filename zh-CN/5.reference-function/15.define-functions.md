# Define 相关函数

## OCIDefineDynamic

**函数功能** ：设置在 `OCIDefineByPos()` 或 `OCIDefineByPos2()` 中选择 `OCI_DYNAMIC_FETCH` 模式时所需的其他属性。

**函数原型** ：

```C++
sword OCIDefineDynamic ( OCIDefine   *defnp,
                         OCIError    *errhp,
                         void        *octxp, 
                         OCICallbackDefine      (ocbfp)(
                                  void          *octxp,
                                  OCIDefine     *defnp,
                                  ub4            iter, 
                                  void         **bufpp,
                                  ub4          **alenpp,
                                  ub1           *piecep,
                                  void         **indpp,
                                  ub2          **rcodep );
```

**函数参数** ：

|       参数        |                                                                                                                                                                                                                                                                                                                                                                                          描述                                                                                                                                                                                                                                                                                                                                                                                           |
|-----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| defnp (IN/OUT)  | 通过调用 `OCIDefineByPos()` 返回的 define 结构的句柄                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| errhp (IN/OUT)  | 一个错误句柄，当出现错误时您可以传递给 [OCIErrorGet](../5.reference-function/7.miscellaneous-functions.md) 以获取诊断信息。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| octxp (IN)      | 指向回调函数的上下文。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ocbfp (IN)      | 指向回调函数。在运行时被调用以获取指向缓​​冲区的指针，该缓冲区用于检索获取的数据或其中的一部分。 回调还会指定指标、返回码以及数据片段和指标的长度。 <blockquote>**说明** </br> 通常，在 OCI 函数中，IN 参数指的是传递给 OCI 的数据，OUT 参数指的是从 OCI 返回的数据。对于回调函数来说情况正好相反。IN 表示数据从 OCI 进入回调函数，OUT 表示数据从回调函数进入 OCI。   </blockquote>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| octxp (IN/OUT)  | 回调函数参数。作为参数传递给所有回调函数的上下文指针。当客户端库需要缓冲区来返回获取的数据时，将调用回调并提供运行时缓冲区返回的部分或全部数据。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| defnp (IN)      | 回调函数参数。define 句柄。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| iter (IN)       | 回调函数参数。指定当前提取的行数，0-based。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| bufpp (OUT)     | 回调函数参数。返回指向缓冲区的指针以存储列值，即 `*bufpp` 指向列值的一些适当存储。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| alenpp (IN/OUT) | 回调函数参数。被应用程序用来设置在 `*bufpp` 中提供的存储的大小。数据被提取到缓冲区后，`alenpp` 表示数据的实际大小（字节）。 如果第一次调用中提供的缓冲区长度不足以存储服务器返回的所有数据，则会再次调用回调，依此类推。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| piecep (IN/OUT) | 回调函数参数。从回调（应用程序）中返回一个 piece 值给 OCI，具体情况如下： `piecep` 参数指示要获取的片段是否为第一个 piece（`OCI_FIRST_PIECE`）、后续 piece（`OCI_NEXT_PIECE`）或最后一个 piece（`OCI_LAST_PIECE`）。</br> 程序可以在下次调用回调时或在一系列回调结束后处理该片段。<ul><li>`IN`：该值可以是 `OCI_ONE_PIECE`、`OCI_FIRST_PIECE` 或 `OCI_NEXT_PIECE`。</li><li> `OUT`：该值取决于 `IN` 值：<ul><li>如果 `IN` 值为 `OCI_ONE_PIECE`，则 `OUT` 值为 `OCI_ONE_PIECE`。</li><li> 如果 `IN` 值为 `OCI_FIRST_PIECE`，则 `OUT` 值为 `OCI_ONE_PIECE` 或 `OCI_FIRST_PIECE`。</li><li> 如果 `IN` 值是 `OCI_NEXT_PIECE`，则 `OUT` 值为 `OCI_NEXT_PIECE` 或 `OCI_LAST_PIECE`。</li></ul> </li></ul>     |
| indpp (IN)      | 回调函数参数。指标变量指针。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| rcodep (IN)     | 回调函数参数。返回代码变量指针。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |

**返回值** ：成功时返回 OCI_SUCCESS，失败时返回 OCI_ERROR。
